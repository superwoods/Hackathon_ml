/**
 * Copyright (c) 2016 Xinhuanet Inc. All rights reserved.
 * XHNA_2016
 * @time 2016-06-26-03.28.23
 */
var $window=$(window),$html=$("html"),$body=$("body"),UA_obj,resources=["video/videoBg.mp4","video/videoBgPoster.jpg"],loadingMask={isOn:0,init:function(){var a=this;0===a.isOn&&($body.prepend('<div class="loadingMask" id="loadingMask" data-size="auto"><div class="t"><div class="startGame hide" id="startGame">开始游戏</div></div></div>'),XHNA_INDEX.videoInit())}},XHNA_INDEX={setTags:function(){this.$mainBox||(this.$mainBox=$("#mainBox")),this.$indexNav||(this.$indexNav=$("#indexNav"))},size:function(){var a=this;a.$sizeTag||(a.$sizeTag=$('[data-size="auto"]'),a.$index_navBox_img=$(".index_navBox").find("img")),a.sizeObj={$windowWidth:$window.width(),$windowHeight:$window.height()},a.$sizeTag.css({width:a.sizeObj.$windowWidth,height:a.sizeObj.$windowHeight}),a.$index_navBox_img.css({"margin-left":.5*-a.$index_navBox_img.width(),"margin-top":.5*-a.$index_navBox_img.height()}),void 0!==a.videoJplayer&&$("#jquery_jplayer_1").jPlayer("option",{size:a.videSize()})},videSize:function(){this.sizeObj||this.size();var a=Math.round(16*this.sizeObj.$windowHeight/9);return a>this.sizeObj.$windowWidth?this.$jplayer_id.css({left:"auto",right:0,"margin-left":0}):this.$jplayer_id.css({left:"50%",right:"auto","margin-left":.5*-a}),{width:a,height:this.sizeObj.$windowHeight}},videoInit:function(){var a=this;if(!a.$videoBox){a.setTags(),$(".loadingMask .t").velocity({translateX:"+=20px"},{duration:2200,loop:!0,easing:"ease-in-out"});var b='<span class="videoClose"></span><div class="videoBox"><div id="jp_container_1" class="jp-video"><div id="jquery_jplayer_1" class="jp-jplayer"></div></div></div>';a.$mainBox.show().append(b),a.indexNavOff(),a.$videoBox=a.$mainBox.find(".videoBox"),a.$videoClose=a.$mainBox.find(".videoClose"),a.$jplayer_id=a.$mainBox.find("#jquery_jplayer_1"),a.videoJplayer=a.$jplayer_id.jPlayer({swfPath:"lib",supplied:"webmv, ogv, m4v, mp3",size:a.videSize(),useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,keyEnabled:!0,remainingDuration:!0,toggleDuration:!0,wmode:"window",ready:function(){$(this).jPlayer("setMedia",{m4v:resources[0],poster:resources[1]})},timeupdate:function(b){var c=b.jPlayer.status.currentTime,d=c>18;d&&a.videoOff()}}),a.$videoClose.on("click",function(){a.videoOff()})}},videoOff:function(){var a=this;a.$videoClose.hide(),a.videoOffTime=4e3,a.$videoBox.velocity("fadeOut",{duration:a.videoOffTime,complete:function(){a.$mainBox.show()}}),a.indexNavOn()},indexNavOn:function(){var a=this;a.$indexNav.velocity({scale:1,opacity:1},{duration:a.videoOffTime,complete:function(){}})},indexNavOff:function(a){var b=this;a=void 0===a?0:b.videoOffTime,b.$indexNav.velocity({scale:3,opacity:0},{duration:a})},indexNavSize:function(){var a=this;a.$indexNavBox||(a.$indexNavBox=$("#indexNavBox")),692>a.sizeObj.$windowHeight?(a.$indexNavBox.css({width:384}),a.$indexNavBox.find("a").css({"margin-left":20})):(a.$indexNavBox.css({width:200}),a.$indexNavBox.find("a").css({"margin-left":"auto"}))}};$(function(){UA_obj=$.browser({tag:$html}),$html.addClass("oh"),loadingMask.init(),XHNA_INDEX.size(),$("#startGame").fadeIn(function(){$(this).on("click",function(){$("#loadingMask").fadeOut(),$("#jquery_jplayer_1").jPlayer("play")})})}),$window.resize(function(){XHNA_INDEX.size()});